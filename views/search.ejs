
<%- include('partials/header', { title: title, user: user }) %>
<main class="search-page container">
  <h1 class="search-title">Buscar PelÃ­culas</h1>
  <form action="/search" method="get" class="search-form">
    <input type="text" name="q" placeholder="Buscar por tÃ­tulo, director, etc." value="<%= typeof q !== 'undefined' ? q : '' %>" autocomplete="off" required>
    <button type="submit" class="btn btn-primary">Buscar</button>
  </form>
  <section class="search-results">
    <h2>Resultados</h2>
    <ul class="movie-cards">
      <% if (typeof results !== 'undefined' && results.length > 0) { %>
        <% results.forEach(function(movie) { %>
          <li class="movie-card">
            <a href="/movie/<%= movie.id %>">
              <% if (movie.poster_image) { %>
                <img src="<%= movie.poster_image.startsWith('http') ? movie.poster_image : '/uploads/movies/' + movie.poster_image %>" alt="<%= movie.title %>" class="movie-poster">
              <% } else { %>
                <div class="movie-poster movie-poster-placeholder">ðŸŽ¬</div>
              <% } %>
              <div class="movie-info">
                <h3><%= movie.title %></h3>
                <% if (movie.release_year) { %>
                  <span class="movie-year">(<%= movie.release_year %>)</span>
                <% } %>
                <% if (movie.description) { %>
                  <p class="movie-description"><%= movie.description.length > 120 ? movie.description.substring(0, 120) + '...' : movie.description %></p>
                <% } %>
                <% if (movie.price) { %>
                  <span class="movie-price">$<%= movie.price %></span>
                <% } %>
              </div>
            </a>
          </li>
        <% }) %>
      <% } else if (typeof results !== 'undefined') { %>
        <li>No se encontraron resultados.</li>
      <% } %>
    </ul>
  </section>
</main>
<script src="/js/search.js"></script>
<%- include('partials/footer') %>
