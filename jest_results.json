{"numFailedTestSuites":3,"numFailedTests":3,"numPassedTestSuites":9,"numPassedTests":41,"numPendingTestSuites":0,"numPendingTests":0,"numRuntimeErrorTestSuites":0,"numTodoTests":0,"numTotalTestSuites":12,"numTotalTests":44,"openHandles":[],"snapshot":{"added":0,"didUpdate":false,"failure":false,"filesAdded":0,"filesRemoved":0,"filesRemovedList":[],"filesUnmatched":0,"filesUpdated":0,"matched":0,"total":0,"unchecked":0,"uncheckedKeysByFile":[],"unmatched":0,"updated":0},"startTime":1768087580827,"success":false,"testResults":[{"assertionResults":[{"ancestorTitles":["Integración - Rutas públicas","Rutas GET públicas"],"duration":45,"failureMessages":[],"fullName":"Integración - Rutas públicas Rutas GET públicas /health - debería responder con JSON","location":null,"status":"passed","title":"/health - debería responder con JSON"},{"ancestorTitles":["Integración - Rutas públicas","Rutas GET públicas"],"duration":202,"failureMessages":[],"fullName":"Integración - Rutas públicas Rutas GET públicas / - debería servir la página principal","location":null,"status":"passed","title":"/ - debería servir la página principal"},{"ancestorTitles":["Integración - Rutas públicas","Rutas GET públicas"],"duration":19,"failureMessages":[],"fullName":"Integración - Rutas públicas Rutas GET públicas /login - debería servir formulario de login","location":null,"status":"passed","title":"/login - debería servir formulario de login"},{"ancestorTitles":["Integración - Rutas públicas","Rutas GET públicas"],"duration":12,"failureMessages":[],"fullName":"Integración - Rutas públicas Rutas GET públicas /register - debería servir formulario de registro","location":null,"status":"passed","title":"/register - debería servir formulario de registro"},{"ancestorTitles":["Integración - Rutas públicas","API pública"],"duration":27,"failureMessages":[],"fullName":"Integración - Rutas públicas API pública /api/reviews - debería retornar reseñas","location":null,"status":"passed","title":"/api/reviews - debería retornar reseñas"},{"ancestorTitles":["Integración - Rutas públicas","API pública"],"duration":13,"failureMessages":["Error: \u001b[2mexpect(\u001b[22m\u001b[31mreceived\u001b[39m\u001b[2m).\u001b[22mtoBe\u001b[2m(\u001b[22m\u001b[32mexpected\u001b[39m\u001b[2m) // Object.is equality\u001b[22m\n\nExpected: \u001b[32m200\u001b[39m\nReceived: \u001b[31m301\u001b[39m\n    at Object.toBe (C:\\Users\\estudiante\\Desktop\\proyect\\tests\\integration.test.js:47:31)\n    at processTicksAndRejections (node:internal/process/task_queues:95:5)"],"fullName":"Integración - Rutas públicas API pública /api-docs - debería servir Swagger UI","location":null,"status":"failed","title":"/api-docs - debería servir Swagger UI"}],"endTime":1768087582755,"message":"\u001b[1m\u001b[31m  \u001b[1m● \u001b[22m\u001b[1mIntegración - Rutas públicas › API pública › /api-docs - debería servir Swagger UI\u001b[39m\u001b[22m\n\n    \u001b[2mexpect(\u001b[22m\u001b[31mreceived\u001b[39m\u001b[2m).\u001b[22mtoBe\u001b[2m(\u001b[22m\u001b[32mexpected\u001b[39m\u001b[2m) // Object.is equality\u001b[22m\n\n    Expected: \u001b[32m200\u001b[39m\n    Received: \u001b[31m301\u001b[39m\n\u001b[2m\u001b[22m\n\u001b[2m    \u001b[0m \u001b[90m 45 |\u001b[39m     test(\u001b[32m'/api-docs - debería servir Swagger UI'\u001b[39m\u001b[33m,\u001b[39m \u001b[36masync\u001b[39m () \u001b[33m=>\u001b[39m {\u001b[22m\n\u001b[2m     \u001b[90m 46 |\u001b[39m       \u001b[36mconst\u001b[39m response \u001b[33m=\u001b[39m \u001b[36mawait\u001b[39m request(app)\u001b[33m.\u001b[39m\u001b[36mget\u001b[39m(\u001b[32m'/api-docs'\u001b[39m)\u001b[33m;\u001b[39m\u001b[22m\n\u001b[2m    \u001b[31m\u001b[1m>\u001b[22m\u001b[2m\u001b[39m\u001b[90m 47 |\u001b[39m       expect(response\u001b[33m.\u001b[39mstatus)\u001b[33m.\u001b[39mtoBe(\u001b[35m200\u001b[39m)\u001b[33m;\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m    |\u001b[39m                               \u001b[31m\u001b[1m^\u001b[22m\u001b[2m\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 48 |\u001b[39m     })\u001b[33m;\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 49 |\u001b[39m   })\u001b[33m;\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 50 |\u001b[39m })\u001b[33m;\u001b[39m\u001b[0m\u001b[22m\n\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat Object.toBe (\u001b[22m\u001b[2m\u001b[0m\u001b[36mtests/integration.test.js\u001b[39m\u001b[0m\u001b[2m:47:31)\u001b[22m\u001b[2m\u001b[22m\n","name":"C:\\Users\\estudiante\\Desktop\\proyect\\tests\\integration.test.js","startTime":1768087580942,"status":"failed","summary":""},{"assertionResults":[{"ancestorTitles":["Integración - Rutas públicas","Rutas GET públicas"],"duration":26,"failureMessages":[],"fullName":"Integración - Rutas públicas Rutas GET públicas /health - debería responder con JSON","location":null,"status":"passed","title":"/health - debería responder con JSON"},{"ancestorTitles":["Integración - Rutas públicas","Rutas GET públicas"],"duration":176,"failureMessages":[],"fullName":"Integración - Rutas públicas Rutas GET públicas / - debería servir la página principal","location":null,"status":"passed","title":"/ - debería servir la página principal"},{"ancestorTitles":["Integración - Rutas públicas","Rutas GET públicas"],"duration":12,"failureMessages":[],"fullName":"Integración - Rutas públicas Rutas GET públicas /login - debería servir formulario de login","location":null,"status":"passed","title":"/login - debería servir formulario de login"},{"ancestorTitles":["Integración - Rutas públicas","Rutas GET públicas"],"duration":12,"failureMessages":[],"fullName":"Integración - Rutas públicas Rutas GET públicas /register - debería servir formulario de registro","location":null,"status":"passed","title":"/register - debería servir formulario de registro"},{"ancestorTitles":["Integración - Rutas públicas","API pública"],"duration":26,"failureMessages":[],"fullName":"Integración - Rutas públicas API pública /api/reviews - debería retornar reseñas","location":null,"status":"passed","title":"/api/reviews - debería retornar reseñas"},{"ancestorTitles":["Integración - Rutas públicas","API pública"],"duration":11,"failureMessages":["Error: \u001b[2mexpect(\u001b[22m\u001b[31mreceived\u001b[39m\u001b[2m).\u001b[22mtoBe\u001b[2m(\u001b[22m\u001b[32mexpected\u001b[39m\u001b[2m) // Object.is equality\u001b[22m\n\nExpected: \u001b[32m200\u001b[39m\nReceived: \u001b[31m301\u001b[39m\n    at Object.toBe (C:\\Users\\estudiante\\Desktop\\proyect\\tests\\auth.test.js:47:31)\n    at processTicksAndRejections (node:internal/process/task_queues:95:5)"],"fullName":"Integración - Rutas públicas API pública /api-docs - debería servir Swagger UI","location":null,"status":"failed","title":"/api-docs - debería servir Swagger UI"}],"endTime":1768087583766,"message":"\u001b[1m\u001b[31m  \u001b[1m● \u001b[22m\u001b[1mIntegración - Rutas públicas › API pública › /api-docs - debería servir Swagger UI\u001b[39m\u001b[22m\n\n    \u001b[2mexpect(\u001b[22m\u001b[31mreceived\u001b[39m\u001b[2m).\u001b[22mtoBe\u001b[2m(\u001b[22m\u001b[32mexpected\u001b[39m\u001b[2m) // Object.is equality\u001b[22m\n\n    Expected: \u001b[32m200\u001b[39m\n    Received: \u001b[31m301\u001b[39m\n\u001b[2m\u001b[22m\n\u001b[2m    \u001b[0m \u001b[90m 45 |\u001b[39m     test(\u001b[32m'/api-docs - debería servir Swagger UI'\u001b[39m\u001b[33m,\u001b[39m \u001b[36masync\u001b[39m () \u001b[33m=>\u001b[39m {\u001b[22m\n\u001b[2m     \u001b[90m 46 |\u001b[39m       \u001b[36mconst\u001b[39m response \u001b[33m=\u001b[39m \u001b[36mawait\u001b[39m request(app)\u001b[33m.\u001b[39m\u001b[36mget\u001b[39m(\u001b[32m'/api-docs'\u001b[39m)\u001b[33m;\u001b[39m\u001b[22m\n\u001b[2m    \u001b[31m\u001b[1m>\u001b[22m\u001b[2m\u001b[39m\u001b[90m 47 |\u001b[39m       expect(response\u001b[33m.\u001b[39mstatus)\u001b[33m.\u001b[39mtoBe(\u001b[35m200\u001b[39m)\u001b[33m;\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m    |\u001b[39m                               \u001b[31m\u001b[1m^\u001b[22m\u001b[2m\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 48 |\u001b[39m     })\u001b[33m;\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 49 |\u001b[39m   })\u001b[33m;\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 50 |\u001b[39m })\u001b[33m;\u001b[39m\u001b[0m\u001b[22m\n\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat Object.toBe (\u001b[22m\u001b[2m\u001b[0m\u001b[36mtests/auth.test.js\u001b[39m\u001b[0m\u001b[2m:47:31)\u001b[22m\u001b[2m\u001b[22m\n","name":"C:\\Users\\estudiante\\Desktop\\proyect\\tests\\auth.test.js","startTime":1768087582795,"status":"failed","summary":""},{"assertionResults":[{"ancestorTitles":["API Routes"],"duration":23,"failureMessages":[],"fullName":"API Routes GET /health debería retornar estado del servidor","location":null,"status":"passed","title":"GET /health debería retornar estado del servidor"},{"ancestorTitles":["API Routes"],"duration":133,"failureMessages":[],"fullName":"API Routes GET /api/reviews debería retornar lista de reseñas","location":null,"status":"passed","title":"GET /api/reviews debería retornar lista de reseñas"},{"ancestorTitles":["API Routes"],"duration":50,"failureMessages":[],"fullName":"API Routes GET / debería renderizar página principal","location":null,"status":"passed","title":"GET / debería renderizar página principal"},{"ancestorTitles":["API Routes"],"duration":12,"failureMessages":[],"fullName":"API Routes GET /login debería renderizar formulario de login","location":null,"status":"passed","title":"GET /login debería renderizar formulario de login"},{"ancestorTitles":["API Routes"],"duration":12,"failureMessages":["Error: \u001b[2mexpect(\u001b[22m\u001b[31mreceived\u001b[39m\u001b[2m).\u001b[22mtoBe\u001b[2m(\u001b[22m\u001b[32mexpected\u001b[39m\u001b[2m) // Object.is equality\u001b[22m\n\nExpected: \u001b[32m200\u001b[39m\nReceived: \u001b[31m301\u001b[39m\n    at Object.toBe (C:\\Users\\estudiante\\Desktop\\proyect\\tests\\api.test.js:47:29)\n    at processTicksAndRejections (node:internal/process/task_queues:95:5)"],"fullName":"API Routes GET /api-docs debería servir documentación Swagger","location":null,"status":"failed","title":"GET /api-docs debería servir documentación Swagger"}],"endTime":1768087584707,"message":"\u001b[1m\u001b[31m  \u001b[1m● \u001b[22m\u001b[1mAPI Routes › GET /api-docs debería servir documentación Swagger\u001b[39m\u001b[22m\n\n    \u001b[2mexpect(\u001b[22m\u001b[31mreceived\u001b[39m\u001b[2m).\u001b[22mtoBe\u001b[2m(\u001b[22m\u001b[32mexpected\u001b[39m\u001b[2m) // Object.is equality\u001b[22m\n\n    Expected: \u001b[32m200\u001b[39m\n    Received: \u001b[31m301\u001b[39m\n\u001b[2m\u001b[22m\n\u001b[2m    \u001b[0m \u001b[90m 45 |\u001b[39m   test(\u001b[32m'GET /api-docs debería servir documentación Swagger'\u001b[39m\u001b[33m,\u001b[39m \u001b[36masync\u001b[39m () \u001b[33m=>\u001b[39m {\u001b[22m\n\u001b[2m     \u001b[90m 46 |\u001b[39m     \u001b[36mconst\u001b[39m response \u001b[33m=\u001b[39m \u001b[36mawait\u001b[39m request(app)\u001b[33m.\u001b[39m\u001b[36mget\u001b[39m(\u001b[32m'/api-docs'\u001b[39m)\u001b[33m;\u001b[39m\u001b[22m\n\u001b[2m    \u001b[31m\u001b[1m>\u001b[22m\u001b[2m\u001b[39m\u001b[90m 47 |\u001b[39m     expect(response\u001b[33m.\u001b[39mstatus)\u001b[33m.\u001b[39mtoBe(\u001b[35m200\u001b[39m)\u001b[33m;\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m    |\u001b[39m                             \u001b[31m\u001b[1m^\u001b[22m\u001b[2m\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 48 |\u001b[39m   })\u001b[33m;\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 49 |\u001b[39m })\u001b[33m;\u001b[39m\u001b[0m\u001b[22m\n\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat Object.toBe (\u001b[22m\u001b[2m\u001b[0m\u001b[36mtests/api.test.js\u001b[39m\u001b[0m\u001b[2m:47:29)\u001b[22m\u001b[2m\u001b[22m\n","name":"C:\\Users\\estudiante\\Desktop\\proyect\\tests\\api.test.js","startTime":1768087583793,"status":"failed","summary":""},{"assertionResults":[{"ancestorTitles":["Orders API (transaccional)"],"duration":767,"failureMessages":[],"fullName":"Orders API (transaccional) should create order and reduce stock on successful payment","location":null,"status":"passed","title":"should create order and reduce stock on successful payment"},{"ancestorTitles":["Orders API (transaccional)"],"duration":738,"failureMessages":[],"fullName":"Orders API (transaccional) should rollback when stock insufficient","location":null,"status":"passed","title":"should rollback when stock insufficient"},{"ancestorTitles":["Orders API (transaccional)"],"duration":665,"failureMessages":[],"fullName":"Orders API (transaccional) should rollback when payment rejected","location":null,"status":"passed","title":"should rollback when payment rejected"},{"ancestorTitles":["Orders API (transaccional)"],"duration":19,"failureMessages":[],"fullName":"Orders API (transaccional) should deny access for unauthenticated users","location":null,"status":"passed","title":"should deny access for unauthenticated users"}],"endTime":1768087587761,"message":"","name":"C:\\Users\\estudiante\\Desktop\\proyect\\tests\\orders.test.js","startTime":1768087584732,"status":"passed","summary":""},{"assertionResults":[{"ancestorTitles":["Admin access flow"],"duration":285,"failureMessages":[],"fullName":"Admin access flow login with email or username allows accessing /admin","location":null,"status":"passed","title":"login with email or username allows accessing /admin"}],"endTime":1768087588762,"message":"","name":"C:\\Users\\estudiante\\Desktop\\proyect\\tests\\admin_access.test.js","startTime":1768087587784,"status":"passed","summary":""},{"assertionResults":[{"ancestorTitles":["Tests que funcionan"],"duration":2,"failureMessages":[],"fullName":"Tests que funcionan 1 + 1 = 2","location":null,"status":"passed","title":"1 + 1 = 2"},{"ancestorTitles":["Tests que funcionan"],"duration":0,"failureMessages":[],"fullName":"Tests que funcionan La aplicación se carga","location":null,"status":"passed","title":"La aplicación se carga"},{"ancestorTitles":["Tests que funcionan"],"duration":22,"failureMessages":[],"fullName":"Tests que funcionan Health check funciona","location":null,"status":"passed","title":"Health check funciona"},{"ancestorTitles":["Tests que funcionan"],"duration":171,"failureMessages":[],"fullName":"Tests que funcionan Página principal carga","location":null,"status":"passed","title":"Página principal carga"},{"ancestorTitles":["Tests que funcionan"],"duration":14,"failureMessages":[],"fullName":"Tests que funcionan Login page carga","location":null,"status":"passed","title":"Login page carga"},{"ancestorTitles":["Tests que funcionan"],"duration":27,"failureMessages":[],"fullName":"Tests que funcionan API reviews retorna JSON","location":null,"status":"passed","title":"API reviews retorna JSON"}],"endTime":1768087589766,"message":"","name":"C:\\Users\\estudiante\\Desktop\\proyect\\tests\\working.test.js","startTime":1768087588780,"status":"passed","summary":""},{"assertionResults":[{"ancestorTitles":["Views and Pages"],"duration":161,"failureMessages":[],"fullName":"Views and Pages GET / debería renderizar página principal","location":null,"status":"passed","title":"GET / debería renderizar página principal"},{"ancestorTitles":["Views and Pages"],"duration":15,"failureMessages":[],"fullName":"Views and Pages GET /login debería renderizar formulario de login","location":null,"status":"passed","title":"GET /login debería renderizar formulario de login"},{"ancestorTitles":["Views and Pages"],"duration":11,"failureMessages":[],"fullName":"Views and Pages GET /register debería renderizar formulario de registro","location":null,"status":"passed","title":"GET /register debería renderizar formulario de registro"},{"ancestorTitles":["Views and Pages"],"duration":13,"failureMessages":[],"fullName":"Views and Pages GET /admin debería redirigir sin autenticación","location":null,"status":"passed","title":"GET /admin debería redirigir sin autenticación"}],"endTime":1768087590686,"message":"","name":"C:\\Users\\estudiante\\Desktop\\proyect\\tests\\views.test.js","startTime":1768087589789,"status":"passed","summary":""},{"assertionResults":[{"ancestorTitles":["Categories & Tags API (protegido)"],"duration":38,"failureMessages":[],"fullName":"Categories & Tags API (protegido) POST /api/categories debe fallar sin token","location":null,"status":"passed","title":"POST /api/categories debe fallar sin token"},{"ancestorTitles":["Categories & Tags API (protegido)"],"duration":12,"failureMessages":[],"fullName":"Categories & Tags API (protegido) GET /api/categories debe fallar sin token","location":null,"status":"passed","title":"GET /api/categories debe fallar sin token"},{"ancestorTitles":["Categories & Tags API (protegido)"],"duration":13,"failureMessages":[],"fullName":"Categories & Tags API (protegido) POST /api/tags debe fallar sin token","location":null,"status":"passed","title":"POST /api/tags debe fallar sin token"}],"endTime":1768087591509,"message":"","name":"C:\\Users\\estudiante\\Desktop\\proyect\\tests\\categories_tags.test.js","startTime":1768087590708,"status":"passed","summary":""},{"assertionResults":[{"ancestorTitles":["Productos públicos"],"duration":67,"failureMessages":[],"fullName":"Productos públicos GET /products debe responder sin auth","location":null,"status":"passed","title":"GET /products debe responder sin auth"},{"ancestorTitles":["Productos públicos"],"duration":14,"failureMessages":[],"fullName":"Productos públicos GET /p/:id-:slug redirige 301 si slug incorrecto","location":null,"status":"passed","title":"GET /p/:id-:slug redirige 301 si slug incorrecto"}],"endTime":1768087592314,"message":"","name":"C:\\Users\\estudiante\\Desktop\\proyect\\tests\\products.test.js","startTime":1768087591530,"status":"passed","summary":""},{"assertionResults":[{"ancestorTitles":["Middleware Functions"],"duration":4,"failureMessages":[],"fullName":"Middleware Functions verifyToken debería rechazar solicitud sin token","location":null,"status":"passed","title":"verifyToken debería rechazar solicitud sin token"},{"ancestorTitles":["Middleware Functions"],"duration":1,"failureMessages":[],"fullName":"Middleware Functions requireAuthAPI debería requerir token en header","location":null,"status":"passed","title":"requireAuthAPI debería requerir token en header"}],"endTime":1768087592993,"message":"","name":"C:\\Users\\estudiante\\Desktop\\proyect\\tests\\middleware.test.js","startTime":1768087592336,"status":"passed","summary":""},{"assertionResults":[{"ancestorTitles":["Database Service"],"duration":101,"failureMessages":[],"fullName":"Database Service debería inicializar correctamente","location":null,"status":"passed","title":"debería inicializar correctamente"},{"ancestorTitles":["Database Service"],"duration":13,"failureMessages":[],"fullName":"Database Service debería obtener información de debug","location":null,"status":"passed","title":"debería obtener información de debug"},{"ancestorTitles":["Database Service"],"duration":101,"failureMessages":[],"fullName":"Database Service debería crear usuario","location":null,"status":"passed","title":"debería crear usuario"},{"ancestorTitles":["Database Service"],"duration":5,"failureMessages":[],"fullName":"Database Service debería obtener usuario por username","location":null,"status":"passed","title":"debería obtener usuario por username"}],"endTime":1768087593609,"message":"","name":"C:\\Users\\estudiante\\Desktop\\proyect\\tests\\database.test.js","startTime":1768087593014,"status":"passed","summary":""},{"assertionResults":[{"ancestorTitles":[],"duration":205,"failureMessages":[],"fullName":"debug DatabaseService mock shape","location":null,"status":"passed","title":"debug DatabaseService mock shape"}],"endTime":1768087594007,"message":"","name":"C:\\Users\\estudiante\\Desktop\\proyect\\tests\\debug_require.test.js","startTime":1768087593630,"status":"passed","summary":""}],"wasInterrupted":false}