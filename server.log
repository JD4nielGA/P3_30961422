ğŸš€ Iniciando CineCrÃ­ticas con Swagger...
=== CINECRITICAS SWAGGER ===
Node version: v19.1.0
NODE_ENV: development
PORT: 3000
=== INICIANDO ===
ğŸ”§ Development mode with dotenv
ğŸ“ Ruta de base de datos SQLite: C:\Users\estudiante\Desktop\proyect\cinecriticas.db
ğŸ”„ Inicializando modelos Sequelize...
ğŸ”„ Configurando relaciones de modelos...
âœ… Relaciones de modelos definidas correctamente
âœ… DatabaseService construido - Modelos cargados
ğŸ” JWT Configurado
ğŸ”„ Cargando configuraciÃ³n Swagger...
ğŸ“Š Especificaciones Swagger cargadas:
   - Paths encontrados: 23
ğŸ“š Swagger UI disponible en: http://localhost:3000/api-docs

ğŸ” CARGANDO CONTROLADORES...
âœ… AuthController cargado
âœ… UserController cargado
âœ… ReviewController cargado
âœ… AdminController cargado
âœ… MovieController cargado
âœ… CategoryController cargado
âœ… TagController cargado
âœ… ProductController cargado
âœ… ProfileController cargado
âœ… OrderController cargado
ğŸ¯ Todos los controladores cargados con manejo de errores

ğŸ” VERIFICACIÃ“N DETALLADA DE CONTROLADORES:

AuthController:
  âœ… MÃ©todos: showLogin, login, showRegister, register, logout, logoutAPI, renderLoginError, renderRegisterError, validateRegistrationData, handleSuccessfulLogin, handleAuthError

UserController:
  âœ… MÃ©todos: showUserReviews, getProfile, updateProfile, listUsers

ReviewController:
  âœ… MÃ©todos: showNewReviewForm, showNewUserReviewForm, createUserReview, showMyReviews, getAllReviews, getReviewById, createReviewAPI, createReviewAdmin, showEditReviewForm, updateReviewAdmin, updateReview, deleteReview, toggleFeatured, deleteReviewAdmin, showReview

AdminController:
  âœ… MÃ©todos: showDashboard, showNewUserForm, showEditUserForm, createUser, updateUser, deleteUser

MovieController:
  âœ… MÃ©todos: showNewMovieForm, createMovie, showEditMovieForm, updateMovie, deleteMovie, activateMovie, _getProductForMovie, _handleProductAssociation, _deleteProductAssociation

CategoryController:
  âœ… MÃ©todos: list, create, getById, update, remove

TagController:
  âœ… MÃ©todos: list, create, getById, update, remove

ProductController:
  âœ… MÃ©todos: create, getById, update, remove, listPublic, showPublic

ProfileController:
  âœ… MÃ©todos: showProfile, updateProfile, purchaseHistory, myReviews, membership, purchaseMembership, getProfileStats, getProfileStatsPublic, checkMembershipStatus, updateProfileTemporary

OrderController:
  âœ… MÃ©todos: createOrderAPI, listOrdersAPI, getOrderAPI
ğŸš€ INICIANDO SERVIDOR CINECRÃTICAS...

1. ğŸ”„ INICIALIZANDO BASE DE DATOS...
ğŸ”„ Inicializando DatabaseService...
ğŸ”„ Conectando a la base de datos SQLite...
ğŸ“¦ Serving client build from /client/build
âœ… ConexiÃ³n a SQLite establecida
ğŸ”„ Sincronizando modelos con la base de datos...
âœ… Todos los modelos sincronizados correctamente
âœ… DatabaseService inicializado correctamente
âœ… DatabaseService inicializado correctamente

2. ğŸ”¥ SINCRONIZANDO MODELOS AUTOMÃTICAMENTE...

3. ğŸ« VERIFICANDO COLUMNAS DE MEMBRESÃA...
âœ… Columnas de membresÃ­a verificadas

4. ğŸ‘¥ CREANDO USUARIOS DE PRUEBA...
ğŸ” Verificando usuarios de prueba...
âœ… Usuario admin ya existe
âœ… Usuario normal ya existe
ğŸ” Credenciales configuradas:
   admin / admin123
   usuario / password123

ğŸ” ESTADO DE USUARIOS DE PRUEBA:
   ğŸ‘‘ ADMIN: No creado
   ğŸ‘¤ USUARIO: No creado

5. ğŸŒ INICIANDO SERVIDOR WEB...
ğŸ¬ Iniciando servidor en puerto: 3000

ğŸ¬ SERVVIDOR ACTIVO EN PUERTO: 3000
âœ… Â¡CineCrÃ­ticas estÃ¡ listo para usar!

ğŸ”— ACCESOS PRINCIPALES:
   ğŸŒ AplicaciÃ³n:      http://localhost:3000
   ğŸ“š DocumentaciÃ³n:   http://localhost:3000/api-docs
   ğŸ” Health Check:    http://localhost:3000/health
   ğŸ§ª Test API:        http://localhost:3000/api/test

ğŸ›’ EJEMPLO DE COMPRA:
   http://localhost:3000/purchase-movie?movie=Avatar&price=3.99

ğŸ’¡ CREDENCIALES DE PRUEBA:
   ğŸ‘‘ ADMINISTRADOR:   admin / admin123
   ğŸ‘¤ USUARIO:         usuario / password123

ğŸ” RUTAS DE PERFIL:
   ğŸ‘¤ Perfil web:          http://localhost:3000/user/profile
   ğŸ”„ Actualizar sesiÃ³n:   PUT http://localhost:3000/api/user/profile/session
   ğŸ”§ Actualizar directo:  PUT http://localhost:3000/api/user/profile/direct
   ğŸ› Debug usuarios:      http://localhost:3000/api/debug/users

ğŸ”§ MANTENIMIENTO:
   ğŸ”„ Reparar BD (npm):    npm run repair-db
   ğŸ”§ Reparar BD (web):    http://localhost:3000/api/system/repair-database
ğŸ‘¤ Creando usuario: smoke_user_1769533180
âœ… Usuario creado: smoke_user_1769533180
ğŸ  Cargando pÃ¡gina de inicio...
ğŸ‘¤ Estado de sesiÃ³n: { hasSession: true, hasUser: false, userId: 'No user' }
ğŸ” Verificando asociaciones de Review...
âœ… AsociaciÃ³n Review -> User funciona correctamente
ğŸ“ Review sample: {
  id: 1,
  title: 'buena',
  hasUser: true,
  username: 'usuario',
  userRole: 'user'
}
â­ Obteniendo reseÃ±as destacadas para home...
âœ… 0 reseÃ±as destacadas encontradas
ğŸ“ Obteniendo reseÃ±as recientes para home...
âœ… 2 reseÃ±as recientes encontradas
ğŸ¬ PelÃ­culas cargadas para home: 2
ğŸ“Š ReseÃ±as cargadas: { destacadas: 0, total: 2 }
ğŸ” Intentando login: smoke_user_1769533180
ğŸ” Buscando usuario por username o email: smoke_user_1769533180
âœ… Usuario smoke_user_1769533180 encontrado: true
âœ… Usuario encontrado: smoke_user_1769533180
ğŸ‘¤ Creando usuario: smoke_user_1769533234
âœ… Usuario creado: smoke_user_1769533234
ğŸ  Cargando pÃ¡gina de inicio...
ğŸ‘¤ Estado de sesiÃ³n: { hasSession: true, hasUser: false, userId: 'No user' }
ğŸ” Verificando asociaciones de Review...
âœ… AsociaciÃ³n Review -> User funciona correctamente
ğŸ“ Review sample: {
  id: 1,
  title: 'buena',
  hasUser: true,
  username: 'usuario',
  userRole: 'user'
}
â­ Obteniendo reseÃ±as destacadas para home...
âœ… 0 reseÃ±as destacadas encontradas
ğŸ“ Obteniendo reseÃ±as recientes para home...
âœ… 2 reseÃ±as recientes encontradas
ğŸ¬ PelÃ­culas cargadas para home: 2
ğŸ“Š ReseÃ±as cargadas: { destacadas: 0, total: 2 }
ğŸ” Intentando login: smoke_user_1769533234
ğŸ” Buscando usuario por username o email: smoke_user_1769533234
âœ… Usuario smoke_user_1769533234 encontrado: true
âœ… Usuario encontrado: smoke_user_1769533234
ğŸ‘¤ Creando usuario: smoke_user_1769533318
âœ… Usuario creado: smoke_user_1769533318
ğŸ  Cargando pÃ¡gina de inicio...
ğŸ‘¤ Estado de sesiÃ³n: { hasSession: true, hasUser: false, userId: 'No user' }
ğŸ” Verificando asociaciones de Review...
âœ… AsociaciÃ³n Review -> User funciona correctamente
ğŸ“ Review sample: {
  id: 1,
  title: 'buena',
  hasUser: true,
  username: 'usuario',
  userRole: 'user'
}
â­ Obteniendo reseÃ±as destacadas para home...
âœ… 0 reseÃ±as destacadas encontradas
ğŸ“ Obteniendo reseÃ±as recientes para home...
âœ… 2 reseÃ±as recientes encontradas
ğŸ¬ PelÃ­culas cargadas para home: 2
ğŸ“Š ReseÃ±as cargadas: { destacadas: 0, total: 2 }
ğŸ” Intentando login: smoke_user_1769533318
ğŸ” Buscando usuario por username o email: smoke_user_1769533318
âœ… Usuario smoke_user_1769533318 encontrado: true
âœ… Usuario encontrado: smoke_user_1769533318
ğŸ‘¤ Creando usuario: smoke_user_1769534933
âœ… Usuario creado: smoke_user_1769534933
ğŸ  Cargando pÃ¡gina de inicio...
ğŸ‘¤ Estado de sesiÃ³n: { hasSession: true, hasUser: false, userId: 'No user' }
ğŸ” Verificando asociaciones de Review...
âœ… AsociaciÃ³n Review -> User funciona correctamente
ğŸ“ Review sample: {
  id: 1,
  title: 'buena',
  hasUser: true,
  username: 'usuario',
  userRole: 'user'
}
â­ Obteniendo reseÃ±as destacadas para home...
âœ… 0 reseÃ±as destacadas encontradas
ğŸ“ Obteniendo reseÃ±as recientes para home...
âœ… 2 reseÃ±as recientes encontradas
ğŸ¬ PelÃ­culas cargadas para home: 2
ğŸ“Š ReseÃ±as cargadas: { destacadas: 0, total: 2 }
ğŸ” Intentando login: smoke_user_1769534933
ğŸ” Buscando usuario por username o email: smoke_user_1769534933
âœ… Usuario smoke_user_1769534933 encontrado: true
âœ… Usuario encontrado: smoke_user_1769534933
ğŸ  Cargando pÃ¡gina de inicio...
ğŸ‘¤ Estado de sesiÃ³n: { hasSession: true, hasUser: true, userId: 1 }
ğŸ” Verificando asociaciones de Review...
âœ… AsociaciÃ³n Review -> User funciona correctamente
ğŸ“ Review sample: {
  id: 1,
  title: 'buena',
  hasUser: true,
  username: 'usuario',
  userRole: 'user'
}
â­ Obteniendo reseÃ±as destacadas para home...
âœ… 0 reseÃ±as destacadas encontradas
ğŸ“ Obteniendo reseÃ±as recientes para home...
âœ… 2 reseÃ±as recientes encontradas
ğŸ¬ PelÃ­culas cargadas para home: 2
ğŸ“Š ReseÃ±as cargadas: { destacadas: 0, total: 2 }
